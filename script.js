document.addEventListener('DOMContentLoaded', () => {
            const appData = {
                eras: [
                    {
                        id: 'golden',
                        name: 'Edad de Oro',
                        dates: 'c. 1938-1956',
                        summary: 'Los cimientos de la industria, definidos por narrativas escapistas y limitaciones tecnol√≥gicas. El arte era simple, directo y funcional, enfocado en la claridad de la historia sobre la complejidad visual.',
                        visuals: [
                            { icon: 'üé®', text: 'Colores planos y primarios debido a la impresi√≥n con puntos Ben-Day.' },
                            { icon: 'üë§', text: 'Figuras caricaturescas y de anatom√≠a simple.' },
                            { icon: 'üìñ', text: 'Dise√±os de p√°gina en cuadr√≠culas r√≠gidas y vi√±etas peque√±as.' }
                        ],
                        artists: [
                            { name: 'Joe Shuster', contribution: 'Co-creador de Superman, su estilo defini√≥ al arquetipo del superh√©roe temprano.' },
                            { name: 'Jack Kirby', contribution: 'En sus inicios, aport√≥ un dinamismo sin precedentes que evolucionar√≠a en eras posteriores.' }
                        ],
                        forces: [
                            { icon: '‚öôÔ∏è', title: 'Tecnolog√≠a de Impresi√≥n', description: 'El uso de puntos Ben-Day y papel de peri√≥dico barato limitaba la paleta a 64 colores planos y afectaba la nitidez.' },
                            { icon: 'üåç', title: 'Contexto Cultural', description: 'El escapismo de la Gran Depresi√≥n y la Segunda Guerra Mundial favoreci√≥ historias heroicas y sencillas.' },
                            { icon: 'üè™', title: 'Modelo de Distribuci√≥n', description: 'Venta masiva en quioscos, lo que requer√≠a una producci√≥n r√°pida y econ√≥mica.' }
                        ],
                        chartData: [3, 2, 2, 3] // Realismo, Complejidad Color, Dinamismo Vi√±eta, Influencia Externa
                    },
                    {
                        id: 'silver',
                        name: 'Edad de Plata',
                        dates: 'c. 1956-1970',
                        summary: 'Un resurgimiento de los superh√©roes con mayor profundidad psicol√≥gica. El arte se vuelve m√°s din√°mico y expresivo, influenciado por la cultura pop y una mejora en las t√©cnicas de impresi√≥n.',
                        visuals: [
                            { icon: 'üé®', text: 'Colores m√°s brillantes y vibrantes, influenciados por el Pop Art.' },
                            { icon: 'üë§', text: 'Figuras m√°s tridimensionales y con mayor expresividad emocional.' },
                            { icon: 'üìñ', text: 'Primeros experimentos rompiendo la rigidez de la cuadr√≠cula para mayor acci√≥n.' }
                        ],
                        artists: [
                            { name: 'Steve Ditko', contribution: 'Co-creador de Spider-Man, con un estilo √∫nico y a veces surrealista.' },
                            { name: 'Jack Kirby', contribution: 'Su trabajo en Marvel defini√≥ un nuevo est√°ndar de acci√≥n c√≥smica y dinamismo.' }
                        ],
                        forces: [
                            { icon: '‚öôÔ∏è', title: 'Tecnolog√≠a de Impresi√≥n', description: 'Mejoras graduales permitieron colores m√°s vivos, aunque todav√≠a basados en separaci√≥n manual.' },
                            { icon: 'üåç', title: 'Contexto Cultural', description: 'La influencia del Pop Art y la contracultura introdujeron nuevas sensibilidades visuales.' },
                            { icon: 'üè™', title: 'Modelo de Distribuci√≥n', description: 'Los quioscos segu√≠an dominando, pero el medio ganaba legitimidad art√≠stica.' }
                        ],
                        chartData: [5, 4, 5, 6]
                    },
                    {
                        id: 'bronze',
                        name: 'Edad de Bronce',
                        dates: 'c. 1970-1985',
                        summary: 'Una era de madurez narrativa, abordando temas sociales complejos. El arte se torn√≥ m√°s realista y crudo, con un enfoque en la anatom√≠a y la composici√≥n cinematogr√°fica para reflejar la seriedad de las historias.',
                        visuals: [
                            { icon: 'üé®', text: 'Tonos m√°s sombr√≠os y profundos para adaptarse a narrativas m√°s oscuras.' },
                            { icon: 'üë§', text: 'Realismo anat√≥mico y proporciones humanas m√°s precisas.' },
                            { icon: 'üìñ', text: 'Composiciones cinematogr√°ficas, con mayor uso de la profundidad y la iluminaci√≥n.' }
                        ],
                        artists: [
                            { name: 'Neal Adams', contribution: 'Aport√≥ un fotorrealismo y dramatismo sin precedentes, revolucionando el arte del c√≥mic.' },
                            { name: 'Frank Miller', contribution: 'Introdujo una sensibilidad noir y un estilo crudo y de alto contraste.' }
                        ],
                        forces: [
                            { icon: '‚öôÔ∏è', title: 'Tecnolog√≠a de Impresi√≥n', description: 'La introducci√≥n del "papel Baxter" a finales de la era permiti√≥ una impresi√≥n m√°s n√≠tida y colores m√°s fieles.' },
                            { icon: 'ÔøΩ', title: 'Contexto Cultural', description: 'El comentario social y las narrativas crudas ("gritty") demandaban un arte m√°s realista.' },
                            { icon: 'üè™', title: 'Modelo de Distribuci√≥n', description: 'El auge del "Mercado Directo" (tiendas de c√≥mics) dio m√°s libertad creativa a los artistas.' }
                        ],
                        chartData: [8, 6, 7, 7]
                    },
                    {
                        id: 'modern',
                        name: 'Edad Moderna',
                        dates: 'c. 1985-2000',
                        summary: 'Consolidaci√≥n de la revoluci√≥n digital y auge de estilos "extremos". El arte se volvi√≥ m√°s cinematogr√°fico, con √©nfasis en el impacto dram√°tico de las vi√±etas grandes y figuras hiper-musculosas.',
                        visuals: [
                            { icon: 'üé®', text: 'Coloreado digital inicial con paletas amplias y gradientes b√°sicos.' },
                            { icon: 'üë§', text: 'Figuras hiper-musculosas y anatom√≠a detallada, a menudo exagerada.' },
                            { icon: 'üìñ', text: 'Uso creciente de splash pages y spreads para un impacto visual.' }
                        ],
                        artists: [
                            { name: 'Todd McFarlane', contribution: 'Estilo hiperdetallado y en√©rgico que defini√≥ una era en los 90s con Spawn y Spider-Man.' },
                            { name: 'Jim Lee', contribution: 'Aport√≥ una calidad elegante y cinematogr√°fica, con un dominio de la anatom√≠a y la acci√≥n.' }
                        ],
                        forces: [
                            { icon: '‚öôÔ∏è', title: 'Tecnolog√≠a Digital', description: 'Primeras versiones de software de coloreado digital (ej. Photoshop) y mejora de la calidad del papel (Baxter).' },
                            { icon: 'üåç', title: 'Contexto Cultural', description: 'Influencia del cine de acci√≥n y el deseo de un arte m√°s "extremo" y din√°mico.' },
                            { icon: 'üè™', title: 'Modelo de Distribuci√≥n', description: 'Consolidaci√≥n del Mercado Directo y surgimiento de editoriales independientes.' }
                        ],
                        chartData: [9, 9, 9, 8]
                    },
                    {
                        id: 'contemporary',
                        name: 'Edad Contempor√°nea',
                        dates: 'c. 2000-Presente',
                        summary: 'Diversificaci√≥n extrema de estilos y experimentaci√≥n con nuevos formatos digitales. El arte se vuelve a√∫n m√°s pulido, globalizado y con un √©nfasis en la narrativa gr√°fica y la accesibilidad en diversas plataformas.',
                        visuals: [
                            { icon: 'üé®', text: 'Coloreado digital avanzado con texturas complejas, iluminaci√≥n sofisticada y efectos de part√≠culas.' },
                            { icon: 'üë§', text: 'Gran variedad de estilos, desde el minimalista hasta el hiperrealista, con foco en la expresividad.' },
                            { icon: 'üìñ', text: 'Experimentaci√≥n con paneles no tradicionales y formatos adaptados a la lectura digital (ej. scroll vertical en webtoons).' }
                        ],
                        artists: [
                            { name: 'Fiona Staples', contribution: 'Reconocida por su estilo distintivo y su uso innovador del color en series como Saga.' },
                            { name: 'Artistas Webcomic', contribution: 'Una nueva generaci√≥n de creadores que exploran formatos digitales y estilos diversos para audiencias globales.' }
                        ],
                        forces: [
                            { icon: '‚öôÔ∏è', title: 'Proliferaci√≥n Digital', description: 'Herramientas de dibujo digital avanzadas, tabletas gr√°ficas y software de edici√≥n que permiten una complejidad sin precedentes.' },
                            { icon: 'üåç', title: 'Globalizaci√≥n y Diversidad', description: 'Creciente influencia del manga, el c√≥mic europeo y una mayor atenci√≥n a la diversidad y representaci√≥n en las historias y el arte.' },
                            { icon: 'üè™', title: 'Distribuci√≥n Digital', description: 'Auge de plataformas de webtoons, c√≥mics digitales y novelas gr√°ficas en librer√≠as, ampliando el alcance del medio.' }
                        ],
                        chartData: [9, 10, 10, 10]
                    }
                ]
            };

            let currentEraId = 'golden';
            let eraChart = null;

            const timelineNav = document.getElementById('timeline-nav').querySelector('.flex');

            function init() {
                createTimeline();
                createChart();
                updateContent();
            }

            function createTimeline() {
                timelineNav.innerHTML = ''; // Clear existing timeline items
                appData.eras.forEach(era => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item flex-1 flex flex-col items-center text-center px-2';
                    item.dataset.id = era.id;
                    item.innerHTML = `
                        <div class="relative">
                            <div class="dot w-6 h-6 rounded-full bg-gray-400 border-4 border-[#FDF6E3] transition-all duration-300"></div>
                        </div>
                        <p class="era-name mt-2 font-bebas text-xl md:text-2xl text-gray-600 tracking-wide">${era.name}</p>
                    `;
                    item.addEventListener('click', () => {
                        currentEraId = era.id;
                        updateContent();
                    });
                    timelineNav.appendChild(item);
                });
            }

            function updateContent() {
                const era = appData.eras.find(e => e.id === currentEraId);

                document.getElementById('era-title').textContent = era.name;
                document.getElementById('era-dates').textContent = era.dates;
                document.getElementById('era-summary').textContent = era.summary;

                const visualsList = document.getElementById('era-visuals');
                visualsList.innerHTML = era.visuals.map(v => `
                    <li class="flex items-start">
                        <span class="text-2xl mr-3">${v.icon}</span>
                        <span>${v.text}</span>
                    </li>
                `).join('');

                const artistsContainer = document.getElementById('era-artists');
                artistsContainer.innerHTML = era.artists.map(a => `
                    <div>
                        <h4 class="font-bold text-lg text-gray-900">${a.name}</h4>
                        <p class="text-gray-600">${a.contribution}</p>
                    </div>
                `).join('');

                const forcesContainer = document.getElementById('era-forces');
                forcesContainer.innerHTML = era.forces.map(f => `
                    <div class="flex items-start">
                        <span class="text-3xl mr-4">${f.icon}</span>
                        <div>
                            <h4 class="font-bold text-lg text-gray-900">${f.title}</h4>
                            <p class="text-gray-600">${f.description}</p>
                        </div>
                    </div>
                `).join('');

                document.querySelectorAll('.timeline-item').forEach(item => {
                    item.classList.toggle('active', item.dataset.id === currentEraId);
                });

                updateChartHighlight();
            }

            function createChart() {
                const ctx = document.getElementById('eraComparisonChart').getContext('2d');
                const labels = ['Realismo', 'Complejidad de Color', 'Dinamismo de Vi√±eta', 'Influencia Externa'];
                const datasets = appData.eras.map(era => ({
                    label: era.name,
                    data: era.chartData,
                    fill: true,
                    backgroundColor: 'rgba(214, 69, 69, 0.1)',
                    borderColor: 'rgba(214, 69, 69, 0.5)',
                    pointBackgroundColor: 'rgba(214, 69, 69, 0.5)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(214, 69, 69, 1)',
                    borderWidth: 2,
                }));

                if (eraChart) {
                    eraChart.destroy(); // Destroy existing chart before creating a new one
                }

                eraChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: labels,
                        datasets: datasets
                    },
                    options: {
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                },
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                },
                                pointLabels: {
                                    font: {
                                        size: 12,
                                        family: 'Roboto'
                                    },
                                    color: '#333'
                                },
                                ticks: {
                                    beginAtZero: true,
                                    max: 10,
                                    stepSize: 2,
                                    backdropColor: 'rgba(253, 246, 227, 0.75)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                             tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.r !== null) {
                                            label += context.parsed.r;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            function updateChartHighlight() {
                if (!eraChart) return;
                const activeIndex = appData.eras.findIndex(e => e.id === currentEraId);
                
                eraChart.data.datasets.forEach((dataset, index) => {
                    if (index === activeIndex) {
                        dataset.backgroundColor = 'rgba(214, 69, 69, 0.4)';
                        dataset.borderColor = 'rgba(214, 69, 69, 1)';
                        dataset.borderWidth = 3;
                        dataset.pointBackgroundColor = 'rgba(214, 69, 69, 1)';
                    } else {
                        dataset.backgroundColor = 'rgba(128, 128, 128, 0.1)';
                        dataset.borderColor = 'rgba(128, 128, 128, 0.4)';
                        dataset.borderWidth = 1.5;
                        dataset.pointBackgroundColor = 'rgba(128, 128, 128, 0.4)';
                    }
                });
                eraChart.update();
            }

            init();
        });
